<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:pageModels="clr-namespace:SolarLab.AdvertBoard.Mobile.Presentation.PageModels"
             x:Class="SolarLab.AdvertBoard.Mobile.Presentation.Pages.UserDraftDetailsPage"
             Title="Черновик">

    <ContentPage.Resources>
        <ResourceDictionary>
            <pageModels:EqualsZeroConverter x:Key="EqualsZeroConverter"/>
            <pageModels:GreaterThanZeroConverter x:Key="GreaterThanZeroConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <!-- Заголовок -->
            <Label Text="Заголовок" FontSize="12" TextColor="#555"/>
            <Entry Text="{Binding Advert.Title}" Placeholder="Введите заголовок"
                   FontSize="20" FontAttributes="Bold"
                   BackgroundColor="{AppThemeBinding Light=#f0f0f0, Dark=#2c2c2c}"/>

            <!-- Фото -->
            <StackLayout>
                <CollectionView ItemsSource="{Binding AdvertImages}" HeightRequest="250" HorizontalScrollBarVisibility="Never"
                                IsVisible="{Binding AdvertImages.Count, Converter={StaticResource GreaterThanZeroConverter}}">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Horizontal" ItemSpacing="8"/>
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame HasShadow="True" CornerRadius="8" Padding="0">
                                <Image Source="{Binding .}" Aspect="AspectFill" WidthRequest="250" HeightRequest="250"/>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <Label Text="Фотографий пока нет" HorizontalOptions="Center" FontAttributes="Italic"
                       IsVisible="{Binding AdvertImages.Count, Converter={StaticResource EqualsZeroConverter}}"/>
            </StackLayout>

            <!-- Кнопка добавить фото -->
            <Button Text="Добавить фото" Command="{Binding AddPhotoCommand}" HorizontalOptions="Center"/>

            <!-- Цена -->
            <Label Text="Цена" FontSize="12" TextColor="#555"/>
            <Entry Text="{Binding Advert.Price}" Placeholder="Введите цену" Keyboard="Numeric" FontSize="18"
                   BackgroundColor="{AppThemeBinding Light=#f0f0f0, Dark=#2c2c2c}"/>

            <!-- Категория -->
            <Label Text="Категория" FontSize="12" TextColor="#555"/>
            <Entry Text="{Binding Advert.CategoryTitle}" Placeholder="Выберите категорию"
                   FontSize="18" BackgroundColor="{AppThemeBinding Light=#f0f0f0, Dark=#2c2c2c}"/>

            <!-- Описание -->
            <Label Text="Описание" FontSize="12" TextColor="#555"/>
            <Editor Text="{Binding Advert.Description}" Placeholder="Введите описание"
                    FontSize="16" HeightRequest="120"
                    BackgroundColor="{AppThemeBinding Light=#f0f0f0, Dark=#2c2c2c}"/>

            <!-- Дата -->
            <Label Text="{Binding Advert.CreatedAt, StringFormat='Создано: {0:dd.MM.yyyy HH:mm}'}" FontSize="12" TextColor="#555"/>
            <Label Text="{Binding Advert.UpdatedAt, StringFormat='Обновлено: {0:dd.MM.yyyy HH:mm}'}" FontSize="12" TextColor="#555"
                   IsVisible="{Binding Advert.UpdatedAt, Converter={StaticResource NotNullToBoolConverter}}"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
